import{j as e,i as k,S as m,b as g,k as C,C as D,U as S,M as P,B as R,E as K,D as E,m as I}from"./ui-CmEgarRF.js";import{f as A,r as d,L as p}from"./vendor-Ce54acmE.js";import{i as f}from"./index-BjMOTf-D.js";import{p as L,d as F}from"./api-D0ds0U2U.js";import"./auth-B5F6nbqB.js";import"./utils-DH2Y5gFI.js";const T=()=>{const{id:r}=A(),[n,j]=d.useState(null),[i,x]=d.useState(""),[l,u]=d.useState(""),[c,h]=d.useState(!1),[a,o]=d.useState(null);d.useEffect(()=>{r&&(async()=>{try{const t=await f.get(`/api/events/${r}`);j(t.data)}catch(t){console.error("Failed to fetch event:",t)}})()},[r]);const N=async s=>{if(s.preventDefault(),!(!i.trim()&&!l.trim())){h(!0);try{const t=new URLSearchParams;i.trim()&&t.append("nik",i.trim()),l.trim()&&t.append("registration_number",l.trim());const w=await f.get(`/api/events/${r}/check-registration?${t}`);o(w.data)}catch(t){console.error("Error checking registration:",t),o({found:!1})}finally{h(!1)}}},b=async()=>{if(a?.participant)try{const s=`/api/events/${r}/participants/${a.participant.id}/download_card`;L(s)}catch(s){console.error("Failed to preview card:",s)}},y=async()=>{if(a?.participant)try{const s=`/api/events/${r}/participants/${a.participant.id}/download_card`;await F(s)}catch(s){console.error("Failed to download card:",s)}},v=()=>{x(""),u(""),o(null)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 py-12",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(p,{to:"/",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:[e.jsx(k,{className:"w-4 h-4"}),"Kembali ke Beranda"]})}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-6",children:e.jsx(m,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Cek Status Registrasi"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Masukkan NIK atau Nomor Registrasi Anda untuk melihat status pendaftaran event."})]}),n&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-3",children:n.name||n.title}),e.jsx("div",{className:"text-gray-600 mb-4 leading-relaxed whitespace-pre-line",children:n.description}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 text-sm text-gray-500",children:[e.jsx("span",{children:new Date(n.eventDate||n.date||"").toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("span",{className:"hidden sm:block",children:"â€¢"}),e.jsx("span",{children:n.location})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Cari Data Pendaftaran"}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"nik",className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(g,{className:"w-4 h-4"}),"NIK (Nomor Induk Kependudukan)"]}),e.jsx("input",{type:"text",id:"nik",value:i,onChange:s=>x(s.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200",placeholder:"Masukkan 16 digit NIK",maxLength:16})]}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-3",children:[e.jsx("div",{className:"h-px bg-gray-300 flex-1 w-16"}),e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"ATAU"}),e.jsx("div",{className:"h-px bg-gray-300 flex-1 w-16"})]})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"registrationNumber",className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Nomor Registrasi"]}),e.jsx("input",{type:"text",id:"registrationNumber",value:l,onChange:s=>u(s.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200",placeholder:"Contoh: E1-0001"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:c||!i.trim()&&!l.trim(),className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:c?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Mencari..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(m,{className:"w-5 h-5"}),"Cek Status"]})}),(i||l||a)&&e.jsx("button",{type:"button",onClick:v,className:"px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors duration-200",children:"Reset"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Hasil Pencarian"}),c?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded-lg"})]})]}):a?a.found?e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(D,{className:"w-10 h-10 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Registrasi Ditemukan!"}),e.jsx("p",{className:"text-green-600",children:"Data pendaftaran Anda berhasil ditemukan."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white p-4 rounded-xl",children:[e.jsx("p",{className:"text-sm font-medium opacity-90",children:"Nomor Registrasi"}),e.jsx("p",{className:"text-xl font-bold",children:a.participant?.registrationNumber})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(S,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Nama Lengkap"}),e.jsx("p",{className:"text-gray-600",children:a.participant?.name})]})]}),a.participant?.email&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(P,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Email"}),e.jsx("p",{className:"text-gray-600",children:a.participant.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(g,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"NIK"}),e.jsx("p",{className:"text-gray-600 font-mono",children:a.participant?.nik})]})]}),a.participant?.institution&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(R,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Instansi"}),e.jsx("p",{className:"text-gray-600",children:a.participant.institution})]})]})]})]}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx("button",{onClick:b,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-green-700 hover:to-emerald-700 focus:outline-none focus:ring-4 focus:ring-green-200 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Preview Kartu Peserta"]})}),e.jsx("button",{onClick:y,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-200 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),"Download Kartu Peserta"]})})]})]}):e.jsxs("div",{className:"text-center py-12 animate-fade-in-up",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:e.jsx(I,{className:"w-10 h-10 text-red-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-red-800 mb-2",children:"Registrasi Tidak Ditemukan"}),e.jsx("p",{className:"text-red-600 mb-6",children:"Data pendaftaran dengan NIK atau Nomor Registrasi yang Anda masukkan tidak ditemukan."}),e.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-left",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Pastikan:"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[e.jsx("li",{children:"â€¢ NIK yang dimasukkan sesuai dengan yang didaftarkan"}),e.jsx("li",{children:"â€¢ Nomor registrasi ditulis dengan benar (contoh: E1-0001)"}),e.jsx("li",{children:"â€¢ Anda sudah melakukan pendaftaran sebelumnya"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(p,{to:`/events/${r}/register`,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors duration-200",children:"Daftar Sekarang"})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(m,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Masukkan NIK atau Nomor Registrasi untuk melihat status pendaftaran Anda."})]})]})]}),e.jsxs("div",{className:"mt-12 bg-blue-50 rounded-2xl p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"Butuh Bantuan?"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 text-sm text-gray-700",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"ðŸ“ž Hubungi Panitia"}),e.jsx("p",{children:"Jika ada pertanyaan terkait pendaftaran, silakan hubungi panitia event."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"ðŸ”„ Perubahan Data"}),e.jsx("p",{children:"Untuk mengubah data pendaftaran, hubungi panitia dengan menyertakan nomor registrasi."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"ðŸŽ« Kartu Peserta"}),e.jsx("p",{children:"Simpan kartu peserta Anda dengan baik. Kartu diperlukan saat check-in event."})]})]})]})]})})};export{T as CheckRegistration};
